INFO:agent.app:[2m2025-08-27T21:34:41.825160Z[0m [[32m[1minfo     [0m] [1mAgent logging configuration   [0m [[34m[1magent.app[0m] [36mdebug_agent[0m=[35mFalse[0m [36mdebug_all[0m=[35mFalse[0m [36mlog_level[0m=[35mINFO[0m
INFO:agent.app:[2m2025-08-27T21:34:41.841133Z[0m [[32m[1minfo     [0m] [1mUsing agent-specific TPM context file[0m [[34m[1magent.app[0m] [36magent_name[0m=[35magent-001[0m [36mcontext_path[0m=[35mtpm/agent-001.ctx[0m
INFO:utils.tpm2_utils:[2m2025-08-27T21:34:41.846284Z[0m [[32m[1minfo     [0m] [1mSoftware TPM (swtpm) is accessible[0m [[34m[1mutils.tpm2_utils[0m] 
INFO:agent.app:[2m2025-08-27T21:34:41.851917Z[0m [[32m[1minfo     [0m] [1mTPM2 utilities initialized successfully[0m [[34m[1magent.app[0m] [36magent_name[0m=[35magent-001[0m [36mcontext_path[0m=[35mtpm/agent-001.ctx[0m [36muse_swtpm[0m=[35mTrue[0m
INFO:agent.app:[2m2025-08-27T21:34:41.859685Z[0m [[32m[1minfo     [0m] [1mSkipping OpenTelemetry metrics setup for compatibility[0m [[34m[1magent.app[0m] 
INFO:agent.app:[2m2025-08-27T21:34:41.860845Z[0m [[32m[1minfo     [0m] [1mOpenTelemetry setup completed (OTLP export disabled)[0m [[34m[1magent.app[0m] 
üöÄ Starting agent: agent-001
üìÅ Config file: agents/agent-001/config.json
üåê Agent port: 8401
üîê APP_HANDLE: 0x8101000B
üîó Gateway: localhost:9000
üìä Collector: localhost:8500
 * Serving Flask app 'agent.app'
 * Debug mode: off
INFO:agent.app:[2m2025-08-27T21:34:42.345953Z[0m [[32m[1minfo     [0m] [1müîÑ [AGENT] Initiating nonce retrieval for metrics[0m [[34m[1magent.app[0m] [36magent_name[0m=[35magent-001[0m [36mmetric_type[0m=[35mapplication[0m
INFO:agent.app:[2m2025-08-27T21:34:42.346400Z[0m [[32m[1minfo     [0m] [1müîÑ [AGENT] Starting nonce request[0m [[34m[1magent.app[0m] [36magent_name[0m=[35magent-001[0m [36mconfig_path[0m=[35magents/agent-001/config.json[0m [36mgateway_url[0m=[35mhttps://localhost:9000[0m
INFO:agent.app:[2m2025-08-27T21:34:42.352929Z[0m [[32m[1minfo     [0m] [1müì§ [AGENT] Sending nonce request to gateway[0m [[34m[1magent.app[0m] [36magent_name[0m=[35magent-001[0m [36mpublic_key_hash[0m=[35m716d79b029c9c7bf...[0m
INFO:agent.app:[2m2025-08-27T21:34:42.353228Z[0m [[32m[1minfo     [0m] [1müîç [AGENT] Signature-Input header created[0m [[34m[1magent.app[0m] [36magent_name[0m=[35magent-001[0m [36msignature_input[0m=[35mkeyid="716d79b029c9c7bf4813fc487eb8e02529475878d8b2024eb2dc6f3424e58baf", created=1756330482, expires=1756330782, alg="Ed25519"[0m
INFO:agent.app:[2m2025-08-27T21:34:42.353468Z[0m [[32m[1minfo     [0m] [1müì§ [AGENT] Final headers for nonce request (public key hash only)[0m [[34m[1magent.app[0m] [36magent_name[0m=[35magent-001[0m [36mheaders[0m=[35m{'Signature-Input': 'keyid="716d79b029c9c7bf4813fc487eb8e02529475878d8b2024eb2dc6f3424e58baf", created=1756330482, expires=1756330782, alg="Ed25519"'}[0m
INFO:agent.app:[2m2025-08-27T21:34:42.399692Z[0m [[32m[1minfo     [0m] [1m‚úÖ [AGENT] Nonce received successfully[0m [[34m[1magent.app[0m] [36magent_name[0m=[35magent-001[0m [36mnonce_length[0m=[35m32[0m [36mnonce_value[0m=[35m2019e5302c3c3c77...[0m [36mpublic_key_hash[0m=[35m716d79b029c9c7bf...[0m [36mresponse_status[0m=[35m200[0m
INFO:agent.app:[2m2025-08-27T21:34:42.402015Z[0m [[32m[1minfo     [0m] [1m‚úÖ [AGENT] Nonce retrieved for metrics processing[0m [[34m[1magent.app[0m] [36magent_name[0m=[35magent-001[0m [36mnonce_length[0m=[35m32[0m [36mnonce_value[0m=[35m2019e5302c3c3c77...[0m
INFO:agent.app:[2m2025-08-27T21:34:42.402776Z[0m [[32m[1minfo     [0m] [1mGeographic region configuration[0m [[34m[1magent.app[0m] [36magent_name[0m=[35magent-001[0m [36magent_prefix[0m=[35mAGENT_001_[0m [36mcity[0m=[35mSanta Clara[0m [36mregion[0m=[35mUS[0m [36msource[0m=[35mdefault[0m [36mstate[0m=[35mCalifornia[0m
INFO:agent.app:[2m2025-08-27T21:34:42.406564Z[0m [[32m[1minfo     [0m] [1müîç [AGENT] Data prepared for signing[0m [[34m[1magent.app[0m] [36magent_name[0m=[35magent-001[0m [36mdata_json[0m=[35m{"geographic_region": {"city": "Santa Clara", "region": "US", "state": "California"}, "metrics": {"metrics": {"active_connections": 39, "error_rate": 1.3280865421572163, "requests_per_second": 53.68190996327905, "response_time_ms": 469.7790828556433}, "service": {"instance_id": "unknown", "name": "opentelemetry-agent", "version": "1.0.0"}, "timestamp": "2025-08-27T21:34:42.345915"}}[0m [36mdata_length[0m=[35m385[0m [36mnonce[0m=[35m2019e5302c3c3c7731d6fcb840bff893[0m
INFO:agent.app:[2m2025-08-27T21:34:42.522053Z[0m [[32m[1minfo     [0m] [1müîç [AGENT] Data signed successfully[0m [[34m[1magent.app[0m] [36magent_name[0m=[35magent-001[0m [36malgorithm[0m=[35msha256[0m [36mdigest[0m=[35m39f5809dacc03b7beab9ef3fb5cf2df2...[0m [36msignature[0m=[35m6e2e9bceda6d96ad8cb9cbb82bd1a6f3...[0m
INFO:agent.app:[2m2025-08-27T21:34:42.524595Z[0m [[32m[1minfo     [0m] [1müîç [AGENT] Payload created for sending[0m [[34m[1magent.app[0m] [36magent_name[0m=[35magent-001[0m [36mmetrics_timestamp[0m=[35m2025-08-27T21:34:42.345915[0m [36mpayload_fields[0m=[35m['agent_name', 'tpm_public_key_hash', 'geolocation', 'metrics', 'geographic_region', 'nonce', 'signature', 'digest', 'algorithm', 'timestamp'][0m [36mpayload_timestamp[0m=[35m2025-08-27T21:34:42.524565[0m
INFO:agent.app:[2m2025-08-27T21:34:42.524887Z[0m [[32m[1minfo     [0m] [1müì§ [AGENT] Sending signed metrics to collector[0m [[34m[1magent.app[0m] [36magent_name[0m=[35magent-001[0m [36mpayload_size[0m=[35m1301[0m [36msignature_length[0m=[35m512[0m
INFO:agent.app:[2m2025-08-27T21:34:42.525228Z[0m [[32m[1minfo     [0m] [1müîç [AGENT] Headers prepared for metrics request[0m [[34m[1magent.app[0m] [36magent_name[0m=[35magent-001[0m [36mall_headers[0m=[35m{'Content-Type': 'application/json', 'Workload-Geo-ID': '{"client_workload_id":"agent-001","client_workload_location":{"region":"US","state":"California","city":"Santa Clara"},"client_workload_location_type":"geographic-region","client_workload_location_quality":"GNSS","client_type":"thick"}', 'Signature-Input': 'keyid="716d79b029c9c7bf4813fc487eb8e02529475878d8b2024eb2dc6f3424e58baf", created=1756330482, expires=1756330782, alg="Ed25519"', 'Signature': '6e2e9bceda6d96ad8cb9cbb82bd1a6f3ab8880cd9b98230c662adecacda8638f6c15596651fa1ff1d3e3a08d508de79e20582691526e1938778eeb7630febb608511fb1417f5a574a90cda53e491b51e2e0836c49ef925204f720700e57599ae3c7ecc041528a0f834a90883c94b8e3ee220ad6d5172a01c449a3d6e010712dc9c6debebc4aa1db85de836db406dbc085dfca313daa371bb18257e4beaf83cdf5f84e2e413c199e6bdf0ba61f74653c6bc1b64186a9b018ac76411e217942c0e66411a8f9b13c25fd48d4eb56373d992e3fef45627ba5e8ee3bbdb72799ffe72616e20beed057f4e14816c055dcf0b5944c32b34871ceecf9355b5e4b6c2925f'}[0m [36mgeographic_region[0m=[35m{'region': 'US', 'state': 'California', 'city': 'Santa Clara'}[0m [36msignature_input_present[0m=[35mTrue[0m [36msignature_present[0m=[35mTrue[0m [36mworkload_geo_id_present[0m=[35mTrue[0m [36mworkload_geo_id_value[0m=[35m{"client_workload_id":"agent-001","client_workload_location":{"region":"US","state":"California","ci...[0m
INFO:agent.app:[2m2025-08-27T21:34:42.525453Z[0m [[32m[1minfo     [0m] [1müîç [AGENT] HTTP signature approach verification[0m [[34m[1magent.app[0m] [36magent_name[0m=[35magent-001[0m [36mhttp_signature_nonce[0m=[35mN/A (payload signature only)[0m [36mpayload_nonce[0m=[35m2019e5302c3c3c7731d6fcb840bff893[0m [36msecurity_model[0m=[35mPayload signature validation only[0m
INFO:agent.app:[2m2025-08-27T21:34:42.601419Z[0m [[32m[1minfo     [0m] [1m‚úÖ [AGENT] Metrics sent successfully to collector[0m [[34m[1magent.app[0m] [36mresponse_size[0m=[35m121[0m [36mresponse_status[0m=[35m200[0m
INFO:agent.app:[2m2025-08-27T21:34:42.601784Z[0m [[32m[1minfo     [0m] [1müéâ [AGENT] Metrics generation and sending completed successfully[0m [[34m[1magent.app[0m] [36magent_name[0m=[35magent-001[0m [36mpayload_id[0m=[35m39f5809dacc03b7b[0m [36mtotal_processing_time[0m=[35mcompleted[0m
